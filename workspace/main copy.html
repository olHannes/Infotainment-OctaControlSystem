<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OC-S</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<style>

/*---------------------------------------------------------------------------------------------------------Style for body*/
body{
    margin: 0; 
    padding: 0; 
    background-image: url('static\\image_1.jpg'); 
    background-size: cover; 
    background-repeat: no-repeat; 
    filter: brightness(100%);
    overflow: hidden;
}

/*---------------------------------------------------------------------------------------------------------CSS-variables for color elements*/
:root {
    --text: #ffffff;

    --sidePanel_1: #030f00;
    --bar_1: rgba(0, 15, 24, 0.74);

    --buttonContainerColor_1: #151515;
    --buttonContainerOpacity: 0.74;


    --volumeSliderTrack: #2e2e2e;
    --volumeSliderBox_1: #003537;

    /*Farben für das OBD-Panel*/
    --obdColor: #022c3a;
    --obdText: #04171d;
    --obdBackground: #c4c4c4;

    /*Color Profile 2*/
    --sidePanel_2: #124a12;
    --bar_2: #2c302c;
    --buttonContainerColor_2: #202220;
    --volumeSliderBox_2: #0b4c0b;
}

/*---------------------------------------------------------------------------------------------------------Style for start Panel Buttons*/
.buttonContainer button {
    border: none;
    padding: 95px 95px;
    border-radius: 56px;
    cursor: pointer;
    -webkit-box-shadow: 9px 9px 17px -1px black;
    box-shadow: 9px 9px 17px -1px black;
    margin-top: 50px;
    background-color: rgba(#151515, 0.74);
    background-color: white;
    margin: 12px;
}

.buttonContainer button:hover {
    opacity: 50%;
}
.btn1 {
    background-image: url("static\\lightControl.png"); background-size: cover; background-position: center;
}
.btn2 {
    background-image: url("static\\soundControl.png"); 
    background-size: cover; 
    background-position: center;
}
.btn3{
    background-image: url("static\\obd_.png"); 
    background-size: cover; 
    background-position: center;
}
.btn4 {
    background-image: url("static\\setting.png"); 
    background-size: cover; 
    background-position: center;
}
.btn5 {
    background-image: url("static\\card.png"); 
    background-size: cover; 
    background-position: center;
}

/*---------------------------------------------------------------------------------------------------------Style for Clock and Date*/
#clock, #date {
    margin-bottom: 20px;
    font-size: large;
    padding-left: 15px;
    padding-right: 20px;
}

/*---------------------------------------------------------------------------------------------------------Style for "back to Start" Button*/
.start{
    position: fixed;
    top: 217px;
    left: 34px;
    background-image: url("static/start.png");
    background-size: cover;
    background-position: center;
    height: 95px;
    width: 95px;
}

/*---------------------------------------------------------------------------------------------------------Style for "Bluetooth" Button*/
#btFunction{
    height: 35px;
}

/*---------------------------------------------------------------------------------------------------------Style for "Wifi" Button*/
#wlanFunction{
    height: 35px;
    padding-left: 14px;
}

/*---------------------------------------------------------------------------------------------------------Style for "mute" Button*/
#muteFunction{
    height: 35px;
}
#loudFunction{
    height: 35px;
}

/*---------------------------------------------------------------------------------------------------------Style for volume Slider*/
.sliderVolumeLevel {
    appearance: none;
    transform-origin: bottom center;
    width: 90vh;
    height: 7px;
    position: absolute;
    bottom: 50%;
    right: -210px;
    background: var(--volumeSliderTrack);
    border-radius: 10px;
    z-index: 2;
    rotate: -90deg;
}

.sliderVolumeLevel::-webkit-slider-thumb {
    -webkit-appearance: none; 
    appearance: none; 
    width: 80px; 
    height: 40px; 
    background-image: url("static\\slider.png"); 
    background-size: cover; 
    background-position: center; 
    -webkit-box-shadow: -9px 13px 15px -2px black; 
    box-shadow: -9px 13px 15px -2px black; 
    cursor: pointer;
}
.volumeLevelBox {
    background-color: var(--volumeSliderBox_1);
    height: 95vh;
    width: 12%;
    position: absolute;
    right: 1%;
    bottom: 12px;
    border-radius: 4px;
}
.slider-labels {
    position: absolute;
    top: 44px;
    left: 61%;
    height: 100%;
    display: flex;
    z-index: 1;
    color: var(--text);
    font-size: 15px;
    font-family: 'Courier New', Courier, monospace;
    flex-direction: column;
}

/*---------------------------------------------------------------------------------------------------------Style for profile change Button*/
.toggleButton {
    border: none;
    background-color: transparent;
    cursor: pointer;
    position: relative;
    top: 47%;
}

#buttonImage {
    position: relative;
    width: 50%;
    border-radius: 5px;
    top: 0;
}





/*---------------------------------------------------------------------------------------------------------Style for ambientLight-Panel components*/
.toggleContainer {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 50px;
}

.toggleContainer label {
    display: inline-block;
    margin: 0 10px;
}

.toggleContainer input[type="checkbox"] {
    display: none;
}

.toggleContainer img {
    width: 290px;
    height: 160px;
    cursor: pointer;
    border-radius: 40px;
}

.toggleContainer input[type="checkbox"]:checked + img {
    opacity: 1;
    -webkit-box-shadow: 9px 9px 17px -1px white; 
    box-shadow: 9px 9px 17px -1px white;
}


.color-picker {
  display: flex; 
  align-items: center; 
  position: absolute; 
  height: 150px; 
  width: 150px; 
  border-radius: 4%; 
  top: 40%; 
  right: 23%;
}

#color-picker-input {
    height: 68px;
    width: 290px;
    position: absolute;
    left: -194%;
    bottom: -92%;
}





/*---------------------------------------------------------------------------------------------------------Style for sound-Panel Components*/
#tip-container {
    position: fixed;
    bottom: 13%;
    left: 55%;
    transform: translateX(-50%);
    background-color: #d3d3d3;
    color: black;
    font-family: 'Courier New', Courier, monospace;
    font-size: large;
    border-radius: 5px;
    box-shadow: 0px 2px 5px rgb(3, 36, 78);
    display: block;
    height: 80px;
    width: 450px;
  }

  #progress-bar {
    height: 10px;
    width: 100%;
    background-color: #004b9b;
    margin-top: 5px;
    margin-left: 5px;
    margin-right: 5px;
    border-radius: 3px;
    animation: progressBar 3s linear forwards;
  }

  @keyframes progressBar {
    0% { width: 100%; }
    100% { width: 0;}
  }





/*---------------------------------------------------------------------------------------------------------Style for obd Panel*/
.OBDcontainer {
    background-color: var(--obdColor); 
    color: var(--text);
    padding: 20px;
    margin-bottom: 20px;
    border-radius: 10px;
    width: auto;
    height: 60px;
}
.OBDlabel {
    font-weight: bold;
    font-size: 130%;
}
.OBDdata {
    font-size: 18px;
    background-color: var(--obdText);
    padding: 2px;
    margin-top: 5px;
}
.liveIndikator{
    height: 5%;
}





/*---------------------------------------------------------------------------------------------------------Style for settings Panel Components*/
.toggle-buttons-container {
    height: 88%;
    width: 243px;
    position: absolute;
    right: 15%;
    top: 6%;
    background-color: #000000d3;
}

.toggle-button {
    display: inline-block;
    margin: 10px;
}

.toggle-button input[type="checkbox"] {
    display: none;
}

.toggle-button img {
    cursor: pointer;
    transition: opacity 0.3s, box-shadow 0.3s;
}

.toggle-button input[type="checkbox"]:checked + label img {
    opacity: 1;
    -webkit-box-shadow: 9px 9px 17px -1px white; 
    box-shadow: 9px 9px 17px -1px white;
}

#colorSettings{
    height: 50px;
    width: 120px;
    position: absolute;
    right: 26%;
    bottom: 8%;
}


/*---------------------------------------------------------------------------------------------------------Style for shutdown Switch*/
.turnOffSwitch{
    -webkit-appearance: none;
    appearance: none;
    transform: rotate(-90deg);
    transform-origin: 0 0;
    width: 30vh;
    height: 3px;
    position: absolute;
    top: 42%;
    left: 22%;
    background: var(--text);
    border-radius: 4px;
}
.turnOffSwitch::-webkit-slider-thumb {
    -webkit-appearance: none; 
    appearance: none; 
    width: 70px; 
    height: 70px; 
    background-image: url("static\\turnOff.png");
    background-position: center;
    background-size: cover;
    cursor: pointer;
}
.turnOffSwitch2::-webkit-slider-thumb {
    background-image: url("static\\turnOff_.png");
}

/*---------------------------------------------------------------------------------------------------------Style for brightness-Level Slider*/
.brightnessLevel{
    appearance: none;
    position: absolute;
    top: 2%;
    left: 19%;
    width: 65%;
    height: 15px;
    border-radius: 20px;
    background: linear-gradient(to right, black, white);
}

.brightnessLevel::-webkit-slider-thumb{
    -webkit-appearance: none; 
    appearance: none; 
    width: 55px; 
    height: 25px; 
    background-image: url("static\\slider.png"); 
    background-size: cover; 
    background-position: center; 
    -webkit-box-shadow: -9px 13px 15px -2px black; 
    box-shadow: -9px 13px 15px -2px black; 
    cursor: pointer;
}

/*---------------------------------------------------------------------------------------------------------Style for status console*/
.console {
    background-color: #000000;
    padding: 4px;
    color: #0ad017;
    height: 200px;
    width: 250px;
    position: absolute;
    left: 200px;
    top: 48%;
    overflow-y: auto;
    word-wrap: break-word;
    white-space: pre-wrap;
    opacity: 75%;
    border-radius: 5px;
    -webkit-box-shadow: 9px 9px 17px -1px black; 
    box-shadow: 9px 9px 17px -1px #393939;
}





/*---------------------------------------------------------------------------------------------------------Styles for shutdown Screen / Message*/
.messageBody {
    font-family: Arial, sans-serif;
    background-color: #00455c;
    text-align: center;
    margin-top: 50px;
    margin-left: 70px;
    margin-right: 70px;
}
.message {
    font-size: 24px;
    color: #333;
    padding: 20px;
    background-color: #fff;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    display: inline-block;
}
.professional {
    font-style: italic;
    font-weight: bold;
    color: #007bff;
}



</style>


<body id="body">

    <div style="display: flex; height: 100vh;" id="sidePanel">
        <div style="background-color: var(--sidePanel_1); opacity: 90%; color: var(--text); padding: 20px; width: 150px; -webkit-box-shadow: 9px 9px 17px -1px var(--shadow); box-shadow: 9px 9px 17px -1px var(--shadow); font-family: 'Courier New', Courier, monospace;" id="sidePanel_">
            <div id="clock"></div>
            <div id="date"></div>

            <img id="wlanFunction" src="static/wlan.png" alt="wifi">
            <img id="btFunction" src="static/bluetooth.png" alt="bluetooth">
            <img id="muteFunction" src="static/mute.png" alt="loud" style="padding-left: 14px;">
            <img id="loudFunction" src="static/loud.png" alt="mute" style="display: none; padding-left: 14px;">

            <button id="toggleButton" class="toggleButton">
                <img id="buttonImage" src="static\Profil1.png" alt="Profilbild">
            </button>


        </div>
        <div style="flex: 1;">
        </div>
    </div>


    <div class="volumeLevelBox" id="volumeLevelBox" style="z-index: 90;">
        <input type="range" min="0" max="100" value="10" step="1" class="sliderVolumeLevel" id="myRange" oninput="volumeChange(this.value)">
        <div class="slider-labels">
            <span style="padding-bottom: 99px;">- 100</span>
            <span style="padding-bottom: 96px;">- 75</span>
            <span style="padding-bottom: 99px;">- 50</span>
            <span style="padding-bottom: 97px;">- 25</span>
            <span style="padding-bottom: 94px;">- 0</span>

        </div>
    </div>
    




    <div class="buttonContainer" id="buttonContainer" style="position: fixed; bottom: 30%; left: 19%; width: 65%; height: 45%; background-color: var(--buttonContainerColor_1); opacity: 80%; z-index: 9999; display: flex; align-items: center; padding-top: 1px; justify-content: space-around; border-radius: 25px; overflow: scroll;">
        <button class="btn1" onclick="lightControlFunction()" id="btn1">   </button>
        <button class="btn2" onclick="soundControlFunction()" id="btn2">   </button>
        <button class="btn3" onclick="obdFunction()" id="btn3">   </button> 
        <button class="btn4" onclick="settingsFunction()" id="btn4">   </button>
        <button class="btn5" onclick="cardFunction()" id="btn5">   </button>
    </div>
    <div style="position: fixed; bottom: 0; left: 0; width: 100%; height: 12%; background-color: var(--bar_1); z-index: 80; color: var(--text); opacity: 0.74;" id="startLabel">
        <div style="position: fixed; bottom: 40px; left: 2%; font-size: 120%; font-family: 'Courier New', Courier, monospace;">Octavia Control System</div>
    </div>


    <div id="listBtDevice" style="display: none; background-color: #d8d8d8; border-radius: 5px; overflow: scroll; height: 99px; width: 167px; position: absolute; top: 194px; left: 10px; font-family: 'Courier New', Courier, monospace; font-size: 13px; z-index: 500;">
        search for Bluetooth connection...
    </div>

    <div id="listWifiNetwork" style="display: none; background-color: #d8d8d8; border-radius: 5px; overflow: scroll; height: 99px; width: 167px; position: absolute; top: 194px; left: 10px; font-family: 'Courier New', Courier, monospace; font-size: 13px; z-index: 500;">
        search for Wifi networks...

    </div>

    <div id="wifiDetailsPanel" style="display: none; background-color: white; border-radius: 10px; padding: 20px; position: absolute; top: 100px; left: 234px; width: 555px; height: 300px; z-index: 10000;">
        <input type="text" id="wifiPassword" placeholder="Passwort eingeben" style="width: 459px;">
        <button onclick="connectWifi()" style="color: white; background-color: #093b00;">connect</button>
    </div>



    <div style="display: none; ", id="ambientLight_ControlPanel">
        <div style="position: fixed; bottom: 0; left: 0; width: 100%; height: 12%; background-color: var(--bar_1); z-index: 80; color: var(--text); opacity: 0.74;" id="lightBar">
            <div style="position: fixed; bottom: 40px; left: 2%; font-size: 120%; font-family: 'Courier New', Courier, monospace;">Ambient Light-Control Panel</div>
        </div>
        <div style="position: fixed; top: 2%; left: 20%; background-color: var(--buttonContainerColor_1); padding: 5px; border-radius: 20px;" id="seatLight">
            <div class="toggleContainer">
                <label for="toggleBtn1">
                    <input type="checkbox" id="toggleBtn1">
                    <img src="static\\vl.png" alt="Button 1">
                </label>
                <label for="toggleBtn2">
                    <input type="checkbox" id="toggleBtn2">
                    <img src="static\\vr.png" alt="Button 2">
                </label>
            </div>
            <div class="toggleContainer">
                <label for="toggleBtn3">
                    <input type="checkbox" id="toggleBtn3">
                    <img src="static\\hl.png" alt="Button 3">
                </label>
                <label for="toggleBtn4">
                    <input type="checkbox" id="toggleBtn4">
                    <img src="static\\hr.png" alt="Button 4">
                </label>
            </div>
        </div>
        
        <div>
            <button class="start" onclick="backToStart()"></button>
        </div>
        <div style="display: flex; align-items: center; position: absolute; height: 150px; width: 150px; top: 40%; right: 20%;">
            <input type="color" id="color-picker-input" onchange="getColor()">
        </div>

    </div>
       
    







<div style="display: none;" id="soundControl_Panel">
    
    <div style="position: fixed; bottom: 0; left: 0; width: 100%; height: 12%; background-color: var(--bar_1); z-index: 80; color: var(--text); opacity: 0.74;" id="soundBar">
        <div style="position: fixed; bottom: 40px; left: 2%; font-size: 120%; font-family: 'Courier New', Courier, monospace;">Sound-Control Panel</div>
    </div>
    <button class="start" onclick="backToStart()"></button>


    <div id="tip-container">
        <p style="margin: 0; font-size: 15px;">Info: schalte zuert die Anlage ein und warte auf eine Verbindung.</p>
        <div id="progress-bar"></div>
    </div>


    <div style="position: absolute; top: 23%; left: 22%; width: 615px; display: flex; align-items: center; justify-content: space-around;">
        <img src="static/bluetooth_.png" alt="bluetooth connection" style="width: 117px; padding: 4px; background-color: #000000; border-radius: 14px;" onclick="openBTSite()">
        <img src="static/spotify.png" alt="spotify webapp" style="width: 125px; border-radius: 14px;" onclick="openSpotifySite()">
        <img src="static/deezer.png" alt="deezer webapp" style="width: 125px; border-radius: 14px;" onclick="openDeezerSite()">
        <img src="static/radio.png" alt="internet radio webapp" style="width: 117px; padding: 4px; background-color: black; border-radius: 14px;" onclick="openRadioSite()">
    </div>
    


    <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>

    <div id="bluetoothPanel" style="display: block; position: absolute; top: 10%; left: 22%; height: 50%; width: 61%; background-color: rgb(0, 0, 0); border-radius: 10px;">
        <h2 style="font-family: 'Courier New', Courier, monospace; font-size: 15px; color: rgb(165, 162, 162); background-color: rgb(39, 38, 38); padding-left: 5px; width: 50px;" onclick="hideBTPanel()">back</h2>
        <div style="font-family: 'Courier New', Courier, monospace; background-color: #000000; color: white; margin-left: 5px;">
            <h2>Song Titel:</h2>
            <h4>Playlist:</h4>
            <h4>Artist:</h4>
            <h4>Duration:</h4>
            <div style="position: absolute; top: 40px; right: 30%">
                <h2 id="titel" style="margin: 0; margin-top: 16px;">example Data</h2>
                <h3 id="playlist" style="margin: 0; margin-top: 16px;">example Data</h3>
                <h3 id="artist" style="margin: 0; margin-top: 16px;">example Data</h3>
                <h3 id="duration" style="margin: 0; margin-top: 16px;">example Data</h3>
            </div>
        </div>
        <div style="display: flex; justify-content: space-around; position: absolute; left: 26%; bottom: 15px; width: auto; background-color: black; border-radius: 12px;"> 
            <img src="static/zurueck.png" alt="back" style="height: 80px;" onclick="prev()">
            <img src="static/play.png" alt="back" style="height: 80px;" onclick="play()">
            <img src="static/pause.png" alt="back" style="height: 80px;" onclick="pause()">
            <img src="static/vor.png" alt="back" style="height: 80px;" onclick="skip()">
        </div>
    </div>

    <script type="text/javascript">
        var socket = io();

        socket.on('metadata_changed', function(data) {
            document.getElementById('titel').innerText = data.title;
            document.getElementById('playlist').innerText = data.album;
            document.getElementById('artist').innerText = data.artist;
            document.getElementById('duration').innerText = data.duration;
        });

        socket.on('metadata_changed', function(data) {
            console.log(data);
        });
    </script>











</div>



<div id="offlineMessage" style="display: none; background-color: #2f0000; position: absolute; top: 2%; left: 51%; transform: translateX(-50%); width: 70%; max-width: 400px; padding: 3px; border-radius: 10px; text-align: center; font-family: Arial, sans-serif; color: white; box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);">
    <h2 style="font-size: 18px; margin-bottom: 0px;">Error: Some functions require an internet connection.</h2>
    <p style="font-size: 14px; margin-top: 10px;">Please search for available networks and connect.</p>
</div>




<div style="display: none;" id="obd_Panel">
    <div style="position: fixed; bottom: 0; left: 0; width: 100%; height: 12%; background-color: var(--bar_1); z-index: 80; color: var(--text); opacity: 0.74;" id="obdBar">
        <div style="position: fixed; bottom: 40px; left: 2%; font-size: 120%; font-family: 'Courier New', Courier, monospace;">On_Board_Diagnose Panel</div>
    </div>

    <div id="obdInfo">
        <h2 style="background-color: rgb(94, 2, 2); padding: 2px; color: white; position: absolute; top: -2%; left: 20%; padding-left: 30px; padding-right: 30px; border-radius: 5px; cursor: pointer; -webkit-box-shadow: 9px 9px 17px -1px black; box-shadow: 9px 9px 17px -1px black" onclick="obd_2Page()" id="obdPage2Btn">2. Seite</h2>
        <div style="background-color: var(--obdBackground); border-radius: 8px; height: 410px; width: 650px; position: absolute; top: 10%; right: 15%; padding: 10px; overflow-y: auto;">
            <div class="OBDcontainer-group" id="Drehzahl">
                <div class="OBDcontainer">
                    <div class="OBDlabel">Drehzahl:</div>
                    <div class="OBDdata" id="rpm">-</div>
                </div>
                <div class="OBDcontainer" id="Geschwindigkeit">
                    <div class="OBDlabel">Geschwindigkeit:</div>
                    <div class="OBDdata" id="speed">-</div>
                </div>
                <div class="OBDcontainer" id="Motorkühlmittel">
                    <div class="OBDlabel">Motorkühlmittel</div>
                    <div class="OBDdata" id="coolant_temp">-</div>
                </div>
                <div class="OBDcontainer" id="Drehmoment">
                    <div class="OBDlabel">Drehmoment:</div>
                    <div class="OBDdata" id="engine_load">-</div>
                </div>
                <div class="OBDcontainer" id="Luftmasse">
                    <div class="OBDlabel">Luftmasse:</div>
                    <div class="OBDdata" id="maf">-</div>
                </div>
                <div class="OBDcontainer" id="Fahrzeit">
                    <div class="OBDlabel">Fahrzeit:</div>
                    <div class="OBDdata" id="runtime">-</div>
                </div>
            </div>
            <div class="OBDcontainer-group">
                <div class="OBDcontainer" id="Fehlerspeicher">
                    <div class="OBDlabel">Fehlerspeicher:</div>
                    <div class="OBDdata" id="dtc">-</div>
                </div>
                <div class="OBDcontainer" id="Kraftstoffsystemstatus">
                    <div class="OBDlabel">Kraftstoffsystemstatus:</div>
                    <div class="OBDdata" id="fuel_status">-</div>
                </div>
                <div class="OBDcontainer" id="Motorlast">
                    <div class="OBDlabel">Motorlast:</div>
                    <div class="OBDdata" id="load_abs">-</div>
                </div>
                <div class="OBDcontainer" id="Kraftstoffdruck">
                    <div class="OBDlabel">Kraftstoffdruck:</div>
                    <div class="OBDdata" id="fuel_pressure">-</div>
                </div>
                <div class="OBDcontainer" id="Kraftstoffverbrauchsrate">
                    <div class="OBDlabel">Kraftstoffverbrauchsrate:</div>
                    <div class="OBDdata" id="fuel_rate">-</div>
                </div>
                <div class="OBDcontainer" id="Identifikation">
                    <div class="OBDlabel">Identifikation:</div>
                    <div class="OBDdata" id="vin">-</div>
                </div>
                <div class="OBDcontainer" id="Batteriespannung">
                    <div class="OBDlabel">Batteriespannung:</div>
                    <div class="OBDdata" id="battery_voltage">-</div>
                </div>
                <div class="OBDcontainer" id="Fahrzeuginformationen">
                    <div class="OBDlabel">Fahrzeuginformationen:</div>
                    <div class="OBDdata" id="current_data">-</div>
                </div>
            </div>
        </div>
    </div>
</div>

<div style="display: none; height: 580px; width: 1000px; position: absolute; top: 0; left: 0;" id="obdVisualisation">
    <h2 style="background-color: rgb(94, 2, 2); padding: 2px; color: white; position: absolute; top: -2%; left: 20%; padding-left: 30px; padding-right: 30px; border-radius: 5px; cursor: pointer; -webkit-box-shadow: 9px 9px 17px -1px black; box-shadow: 9px 9px 17px -1px black;" onclick="obd_3Page()" id="obd1">Fehlerspeicher</h2>
    <img src="static/tacho.png" alt="Tachometer" style="width: 43%; position: absolute; top: 83px; left: 196px; border-radius: 25px;box-shadow: 9px 9px 17px -1px black">
    <img src="static/zeiger.png" alt="Zeiger" style="position: absolute; height: 140px; transform-origin: center 133px; left: 40.5%; top: 26.5%; transform: rotate(-92deg);transition: all 0.4s ease;" id="zeiger">
    <div>
        <div style="width: 150px; height: 450px; position: absolute; left: 66%; top: 13%;">
            <img style="width: 80%; height: 100%; position: absolute; top: 0; left: 0; transition: height 0.2s ease-in-out; border-radius: 5%; box-shadow: 9px 9px 17px -1px black" src="static/Drehzahl.png" alt="Leere Säule">
            <img style="width: 80%; height: 100%; position: absolute; top: 0; left: 0; transition: height 0.2s ease-in-out; border-radius: 5%;" src="static/Drehzahl_.png" alt="Gefüllte Säule" id="rpmLevel">
            <img style="width: auto; height: 100%; position: absolute; top: 0; left: -10%; background-color: black; border-radius: 10px;" src="static/DrehzahlNum.png" alt="Drezhal Beschriftung">
        </div>
    </div>
    <div style="display: flex; justify-content: center; align-items: center; height: auto; width: 300px; background-color: black; box-shadow: 9px 9px 17px -1px black; position: relative; top: 18%; right: -900px; border-radius: 5px;">
        <img src="static/Thermometer.png" alt="Thermometer" style="max-width: 65%; position: relative; z-index: 1;">
        <div id="liquid" style="position: absolute; bottom: 8%; left: 40%; transform: translateX(-50%); width: 18%; height: 11%; background-color: #353567; z-index: 0;transition: all 0.4s ease;"></div>
        <h1 style="color: white; background-color: darkslategrey; border-radius: 3px; padding: 4px; font-family: 'Courier New', Courier, monospace; font-size: 25px; z-index: 2; position: absolute; bottom: 0%; left: 54%;" id="digitalTemp"> 0°C</h1>
    </div>
    <div style="position: absolute; left: 20%; top: 72%;">
        <div style="padding: 5px; width: 363px; border-radius: 5px; position: absolute; background-color: rgb(78, 78, 78);">
            <img src="static/battery.png" alt="BatteryVoltage" style="height: 75px; z-index: 5; position: relative;">
            <div style="background-color: rgb(180, 6, 6); height: 42%; width: 0.5%; position: absolute; left: 63%; top: 22%; z-index: 3; transition: all 0.4s ease;" id="voltageG12"></div>
            <div style="background-color: rgb(9, 6, 180); height: 42%; width: 0.5%; position: absolute; right: 36.5%; top: 22%; z-index: 3; transition: all 0.4s ease;" id="voltageU12"></div>
            <div style="background-color: white; height: 42%; width: 0.5%; position: absolute; left: 63%; top: 22%; z-index: 4;"></div>
            <h1 style="color: white; font-family: 'Courier New', Courier, monospace; font-size: 75%; position: absolute; left: 58.5%; bottom: 68%; z-index: 5;">12.0V</h1>
            <h1 style="color: white; font-family: 'Courier New', Courier, monospace; font-size: 75%; position: absolute; left: 58.5%; bottom: 8%; z-index: 5;" id="voltage">12.0V</h1>
        </div>
    </div>
</div>

<div style="display: none; height: 580px; width: 1000px; position: absolute; top: 0; left: 0;" id="obdErrorPage">
    <h2 style="background-color: rgb(94, 2, 2); padding: 2px; color: white; position: absolute; top: -2%; left: 20%; padding-left: 30px; padding-right: 30px; border-radius: 5px; cursor: pointer; -webkit-box-shadow: 9px 9px 17px -1px black; box-shadow: 9px 9px 17px -1px black;" onclick="obd_1Page()" id="obd1">1. Seite</h2>
    <div style="width: 49%; position: absolute; top: 15%; left: 29%; background-color: gray; border-radius: 17px; padding: 10px;">
        <h1 style="text-align: center; color: white;">OBD-II Fehlercodes</h1>
        <table id="errorTable" style="width: 80%; border-collapse: collapse; margin: 20px auto;">
            <thead>
                <tr>
                    <th style="border: 1px solid #ddd; padding: 8px; text-align: left; background-color: #f2f2f2;">Fehlercode</th>
                </tr>
            </thead>
            <tbody id="errorBody">
            </tbody>
        </table>
        <button style="padding: 10px 20px; font-size: 16px; background-color: #007bff; color: #fff; border: none; border-radius: 4px; cursor: pointer;" onclick="clearErrorCodes()" >Fehlerspeicher löschen</button>
    </div>
</div>



<div id="additiveComponents" style="display: none;">
    <img id="live" src="static\\live.png" alt="liveIndicator" style="height: 50px; width: 110px; border-radius: 51px; margin-left: 50px; position: absolute; top: 10px; right: 10px;z-index: 80;">
    <button class="start" onclick="backToStart()" id="startButton_obd"></button>
</div>






















<div style="display: none;" id="settings">
    <div style="position: fixed; bottom: 0; left: 0; width: 100%; height: 12%; background-color: var(--bar_1); z-index: 80; color: var(--text); opacity: 0.74;" id="settingsBar">
        <div style="position: fixed; bottom: 40px; left: 2%; font-size: 120%; font-family: 'Courier New', Courier, monospace;">Settings</div>
    </div>

    <div class="console" id="console"> </div>
    <button style="color: white; background-color: black; position: absolute; bottom: 15%; left: 20%; height: 17px; width: 44px; padding: 0;" onclick="clearLogger()">clear</button>

    <input type="range" min="0" max="100" value="0" step="1" class="turnOffSwitch" id="turnOffSwitch">
    <div>
        <input type="range" min="50" max="200" value="100" step="1" class="brightnessLevel" id="brightnessLevel" oninput="brightnessLevelChange(this.value)">
    </div>



    <div id="colorContainer" class="toggle-buttons-container">
        <h1 style="margin: 7px; font-family: 'Courier New', Courier, monospace; color: #ffffff; font-size: 18px;">Color Settings for Profile 2</h1>
        <div style="display: flex; align-items: center; justify-content: space-around;"> 
            <div class="toggle-button">
                <input type="checkbox" id="colorBtn2" onclick="toggleShadow('colorBtn2')">
                <label for="colorBtn2"><img src="static/settings_sideBar.png" alt="Button 2" style="height: 180px;"></label>
            </div>
            <div class="toggle-button">
                <input type="checkbox" id="colorBtn4" onclick="toggleShadow('colorBtn4')">
                <label for="colorBtn4"><img src="static/settings_volumeBox.png" alt="Button 4" style="height: 180px;"></label>
            </div>
        </div>

        <div style="display: flex; align-items: center; flex-direction: column; justify-content: space-around;">
            <div class="toggle-button">
                <input type="checkbox" id="colorBtn1" onclick="toggleShadow('colorBtn1')">
                <label for="colorBtn1"><img src="static/settings_bar.png" alt="Button 1" style="height: 50px;"></label>
            </div>
            <div class="toggle-button">
                <input type="checkbox" id="colorBtn3" onclick="toggleShadow('colorBtn3')">
                <label for="colorBtn3"><img src="static/settings_btnContainer.png" alt="Button 3" style="height: 90px;"></label>
            </div>
        </div>

        <input type="color" id="colorSettings" onchange="setColor()">
    </div>


    <div style="position: absolute; top: 11%; right: 52%; box-shadow: 9px 9px 17px -1px black;">
        <button id="bgButton" style="height: 59px; display: flex;  align-items: center; flex-direction: column; background-color: #313131;" onclick="setBackgroundImage()">
            <h1 style="font-family: 'Courier New', Courier, monospace; color: #e4dbdb; font-size: 19px;">Change Background</h1>
        </button>
    </div>

    <div id="selectBackgroundImage" style="overflow: auto; position: absolute; background-color: rgb(7, 24, 34); height: 38%; width: 60%; top: 17%; left: 22%; display: flex; align-items: flex-end; justify-content: space-around; padding: 10px; box-shadow: 4px 5px 16px 0px #000000; border-radius: 10px;">
        <h1 style="position: absolute; top: 0%; color:white; font-family: 'Courier New', Courier, monospace;">select Backgorund Image</h1>
        <img src="static/image_1.jpg" height="160px" alt="backgorund Img 1" onclick="changeBackground(1)" style="margin-right: 10px;">
        <img src="static/image_2.jpg" height="160px" alt="backgorund Img 2" onclick="changeBackground(2)" style="margin-right: 10px;">
        <img src="static/image_3.jpg" height="160px" alt="backgorund Img 3" onclick="changeBackground(3)" style="margin-right: 10px;">
        <img src="static/image_4.jpg" height="160px" alt="backgorund Img 4" onclick="changeBackground(4)" style="margin-right: 10px;">
        <img src="static/image_5.jpg" height="160px" alt="backgorund Img 5" onclick="changeBackground(5)" style="margin-right: 10px;">
        <img src="static/image_6.jpg" height="160px" alt="backgorund Img 6" onclick="changeBackground(6)" style="margin-right: 10px;">
        <img src="static/image_7.jpg" height="160px" alt="backgorund Img 7" onclick="changeBackground(7)"> 
    
    </div>




    <div>
        <button class="start" onclick="backToStart()"></button>
    </div>
</div>



<div id="exitPanel" class="messageBody" style="display: none;">
    <div class="message">
        <p><span class="professional">Important:</span> Please ensure the 'OctaControl-System' is powered down correctly.</p>
        <p><span class="professional">Wichtig:</span> Bitte stellen Sie sicher, dass das 'OctaControl-System' ordnungsgemäß heruntergefahren wird.</p>
    </div>
    <h3 style="font-size: 146%; position: absolute; left: 7%; top: 99%; color: white; font-family: 'Courier New', Courier, monospace;" id="countdown">Shutdown in 5...</h3>
</div>

</body>















<script>

//--------------------------------------------------------------------------------------------------------- function for logging
function logConsole(message) {
    const now = new Date();
    const timeString = now.toLocaleTimeString();

    const formattedMessage = `<span style="color: red;">${timeString}</span> ${message}\n`;
    const consoleElement = document.getElementById("console");
    consoleElement.innerHTML += formattedMessage;

    consoleElement.scrollTop = consoleElement.scrollHeight;
}
function clearLogger(){
    document.getElementById('console').innerHTML="";
    event.stopPropagation();
}

    //---------------------------------------------------------------------------------------------------------hide Panels when they arent in use
    document.addEventListener('click', function(event) {
            logConsole("touch");
            if (document.getElementById('listBtDevice').style.display === 'block') {
                document.getElementById('listBtDevice').style.display = 'none';
            }
            if (document.getElementById('listWifiNetwork').style.display === 'block'){
                document.getElementById('listWifiNetwork').style.display = 'none';
            }
            if(document.getElementById('wifiDetailsPanel').style.display === 'block'){
                document.getElementById('wifiDetailsPanel').style.display="none";
            }
            if(document.getElementById('selectBackgroundImage').style.display === 'flex'){
                document.getElementById('selectBackgroundImage').style.display="none";
            }
        });

    //---------------------------------------------------------------------------------------------------------globale Variablen
    var showOBDData     =   false;
    
    
    
    //---------------------------------------------------------------------------------------------------------live Clock
    function updateTime() {
            var now = new Date();
            var hours = now.getHours().toString().padStart(2, '0');
            var minutes = now.getMinutes().toString().padStart(2, '0');
            var seconds = now.getSeconds().toString().padStart(2, '0');
            var timeString = hours + ':' + minutes + ':' + seconds;
            var dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            var dateString = now.toLocaleDateString('de-DE', dateOptions);
        
            document.getElementById('clock').textContent = timeString;
            document.getElementById('date').textContent = dateString;
        
        }
        setInterval(updateTime, 1000);
    
    

    //---------------------------------------------------------------------------------------------------------function to connect to wifi
    
    var currentSelectedNetwork = '';
    document.getElementById('wlanFunction').addEventListener('click', function(event) {
        wlanConnection();
        event.stopPropagation();
    });
    
    
    
    function wlanConnection(){
        document.getElementById("listBtDevice").style.display="none";
        document.getElementById("listWifiNetwork").style.display="block";
        getWifiNetwork();
        logConsole("getWifi");
    }
    
    function getWifiNetwork() {
        fetch('/get_wifi_network', {
            method: 'GET'
        })
        .then(response => response.json())
        .then(data => {
            console.log("Empfangene Netzwerke:", data);
            listNetworks(data);
        })
        .catch(error => console.error('Error fetching networks:', error));
    }

    function listNetworks(data) {
        let listWifiNetwork = document.getElementById("listWifiNetwork");
        listWifiNetwork.innerHTML = "search for Wifi networks...";

        for (let key in data) {
            if (data.hasOwnProperty(key)) {
                let listItem = document.createElement("h2");
                listItem.textContent = data[key];
                listItem.setAttribute("onclick", "showWifiDetails('" + data[key] + "')");
                listWifiNetwork.appendChild(listItem);
            }
        }
    }






    function showWifiDetails(selectedNetwork){
        document.getElementById('wifiDetailsPanel').style.display="block";
        document.getElementById('wifiPassword').placeholder='password for network: '+ selectedNetwork;
        currentSelectedNetwork = selectedNetwork;
        document.getElementById('wifiPassword').focus();
        sendData("setTastatur", {"level": true});
        event.stopPropagation();
    }

    function connectWifi(){
        document.getElementById('wifiDetailsPanel').style.display="none";
        var password=document.getElementById('wifiPassword').value;
        var wifiData = currentSelectedNetwork + '_' + password;
        sendData("setWifi", {"level": wifiData});
        logConsole("connect To Wifi");
    }


    //---------------------------------------------------------------------------------------------------------function to connect to bt
    
    
    document.getElementById('btFunction').addEventListener('click', function(event) {
        btConnection();
        event.stopPropagation();
    });
    
    
    function btConnection(){
        sendData("setBt", {"level": true});
        document.getElementById("listWifiNetwork").style.display="none";
        document.getElementById("listBtDevice").style.display="block";
        console.log("bluetooth panel soll angezeigt werden.");
        logConsole("Scan for Bt devices");
        getBtDevices();

    }

    function getBtDevices() {
        fetch('/get_bt_devices', {
            method: 'GET'
        })
        .then(response => response.json())
        .then(data => {
            console.log("Empfangene Bluetooth-Devices:", data);
            listDevices(data);
        })
        .catch(error => console.error('Error fetching bluetooth devices:', error));
    }

    function listDevices(data){
        let listBtDevices = document.getElementById("listBtDevice");
        listBtDevices.innerHTML = "search for bluetooth Devices...";

        for (let key in data) {
            if (data.hasOwnProperty(key)) {
                let listItem = document.createElement("h2");
                listItem.textContent = data[key];
                listBtDevices.appendChild(listItem);
            }
        }
    }

    //---------------------------------------------------------------------------------------------------------volume change
    
    var mute=false;

    function volumeChange(value){
        if(value == 0){
            document.getElementById('loudFunction').style.display="flex";
            document.getElementById('muteFunction').style.display="none";
        }else{
            document.getElementById('loudFunction').style.display="none";
            document.getElementById('muteFunction').style.display="flex";
        }

        if(mute == false){
            
        }
        logConsole("Volume: "+value);
        sendData("volume", {"level": value});
    }


    document.getElementById('muteFunction').addEventListener('click', function(event) {
        volumeChange(0);
        document.getElementById('myRange').value=0;
    });

    document.getElementById('loudFunction').addEventListener('click', function(event) {
        volumeChange(10);
        document.getElementById('myRange').value=10;
    });
    
    
    //---------------------------------------------------------------------------------------------------------website brightness Change
    function brightnessLevelChange(value){
        var wert=value-50;
        logConsole("brightness Level: "+ wert);
        document.body.style.filter = "brightness(" + value + "%)";
    }
    
    
    //---------------------------------------------------------------------------------------------------------change Color Profile
    document.getElementById('toggleButton').addEventListener('click', function() {
        logConsole("change Profile");
        var image = document.getElementById('buttonImage');
    
        if (image.src.includes("Profil1")) {
            document.getElementById("console").textContent+="change to Profile 2\n";
            document.getElementById("console").scrollTop = document.getElementById("console").scrollHeight;
            image.src = "static\\Profil2.png";
            document.getElementById('startLabel').style.backgroundColor = "var(--bar_2)";
            document.getElementById('lightBar').style.backgroundColor = "var(--bar_2)";
            document.getElementById('soundBar').style.backgroundColor = "var(--bar_2)";
            document.getElementById('obdBar').style.backgroundColor = "var(--bar_2)";
            document.getElementById('settingsBar').style.backgroundColor = "var(--bar_2)";
            document.getElementById('sidePanel_').style.backgroundColor = "var(--sidePanel_2)";
            document.getElementById('volumeLevelBox').style.backgroundColor = "var(--volumeSliderBox_2)";
            document.getElementById('buttonContainer').style.backgroundColor = "var(--buttonContainerColor_2)";
            document.getElementById('seatLight').style.backgroundColor = "var(--buttonContainerColor_2)";
        } else {
            document.getElementById("console").textContent+="change to Profile 1\n";
            document.getElementById("console").scrollTop = document.getElementById("console").scrollHeight;
            image.src = "static\\Profil1.png";
            document.getElementById('startLabel').style.backgroundColor = "var(--bar_1)";
            document.getElementById('lightBar').style.backgroundColor = "var(--bar_1)";
            document.getElementById('soundBar').style.backgroundColor = "var(--bar_1)";
            document.getElementById('obdBar').style.backgroundColor = "var(--bar_1)";
            document.getElementById('settingsBar').style.backgroundColor = "var(--bar_1)";
            document.getElementById('sidePanel_').style.backgroundColor = "var(--sidePanel_1)";
            document.getElementById('volumeLevelBox').style.backgroundColor = "var(--volumeSliderBox_1)";
            document.getElementById('buttonContainer').style.backgroundColor = "var(--buttonContainerColor_1)";
            document.getElementById('seatLight').style.backgroundColor = "var(--buttonContainerColor_1)";
        }
    });
    
    

    //---------------------------------------------------------------------------------------------------------change Background Image
    function changeBackground(value) {
        logConsole("change Background");
        const imageUrl = `static\\\\image_${value}.jpg`;
        console.log(imageUrl);
        document.body.style.backgroundImage = `url('${imageUrl}')`;
    }

    function setBackgroundImage(){
        document.getElementById('selectBackgroundImage').style.display="flex";
        event.stopPropagation();
    }


    //---------------------------------------------------------------------------------------------------------DOMContentLoaded Function
    document.addEventListener("DOMContentLoaded", function() {
        //---------------------------------------------------------------------------------------------------------Event for tip (Musik Anlage) to dissappear
        var tipContainer = document.getElementById("tip-container");
        var progressBar = document.getElementById("progress-bar");
        progressBar.addEventListener("animationend", function() {
            tipContainer.style.display = "none";
        });
    });



    function openBTSite(){
        document.getElementById('bluetoothPanel').style.display="block";
    }
    function hideBTPanel(){
        document.getElementById('bluetoothPanel').style.display="none";
    }
    function play(){
        sendData("play", {"level": true});
    }
    function pause(){
        sendData("pause", {"level": true});
    }
    function skip(){
        sendData("skip", {"level": true});
    }
    function prev(){
        sendData("prev", {"level": true});
    }




    function openDeezerSite() {
    checkInternetConnection()
        .then(connected => {
            if (connected) {
                logConsole("start deezer");
                sendData("startDeezer", {"level": true});
            } else {
                showInternetError();
            }
        })
        .catch(error => {
            showInternetError();
        });
}
    function openSpotifySite() {
    checkInternetConnection()
        .then(connected => {
            if (connected) {
                logConsole("start spotify");
                sendData("startSpotify", {"level": true});
            } else {
                showInternetError();
            }
        })
        .catch(error => {
            showInternetError();
        });
}
    function openRadioSite() {
    checkInternetConnection()
        .then(connected => {
            if (connected) {
                logConsole("start radio");
                sendData("startRadio", {"level": true});
            } else {
                showInternetError();
            }
        })
        .catch(error => {
            showInternetError();
        });
}
    
    
    //---------------------------------------------------------------------------------------------------------Function to clear DTC
    function clearErrorCodes(){
        sendData("deleteDTC",{"level": true});
        logConsole("try: deleteDTC");
        var tableBody = document.getElementById("errorBody");
        tableBody.innerHTML = "";
        var dtc=document.getElementById('dtc');
        dtc.textContent="-";
    }
    
    //---------------------------------------------------------------------------------------------------------Function to exit OCS
    function exit(){
        document.getElementById('buttonContainer').style.display="none";
        document.getElementById('ambientLight_ControlPanel').style.display="none";
        document.getElementById('soundControl_Panel').style.display="none";
        document.getElementById('settings').style.display="none";
        document.getElementById('turnOffSwitch').style.display="none";
        document.getElementById('startLabel').style.display="none";
        document.getElementById('console').style.display="none";
        document.getElementById('sidePanel').style.display="none";
        document.getElementById('volumeLevelBox').style.display="none";
        document.body.style.backgroundColor = "#00455c";
        document.body.style.backgroundImage = "none";
        document.getElementById('brightnessLevel').style.display="none";
        document.body.style.filter = "brightness(" + 100 + "%)";
        logConsole("exit OCS");
        document.getElementById('exitPanel').style.display="block";
        countdown();
    }
    
    //---------------------------------------------------------------------------------------------------------Function Countdown shows 5 seconds countdown
    function countdown(){
        var countdownElement = document.getElementById("countdown");
        var count = 5;
        var countdownInterval = setInterval(function(){
            countdownElement.textContent = "Shutdown in "+count+"...";
            count--;
            if(count < 0){
                clearInterval(countdownInterval);
                countdownElement.textContent = "";
            }
        }, 1000);
        console.log("ende");
    }
    
    //---------------------------------------------------------------------------------------------------------Function backToStart shows the main Screen
    function backToStart(){
        document.getElementById('ambientLight_ControlPanel').style.display="none";
        document.getElementById('soundControl_Panel').style.display="none";
        document.getElementById('obd_Panel').style.display="none";
        document.getElementById('settings').style.display="none";
        showOBDData=false;
        document.getElementById('startLabel').style.display="block";
        document.getElementById('buttonContainer').style.display="flex";
    
        document.getElementById('obdVisualisation').style.display="none";
        document.getElementById('obdErrorPage').style.display="none";
        document.getElementById('additiveComponents').style.display="none";
        stopliveIndicator();
    }
    
    //---------------------------------------------------------------------------------------------------------Function hideStartButton hides main-Site Buttons
    function hideStartButton(){
        document.getElementById('buttonContainer').style.display = "none";
        document.getElementById('startLabel').style.display="none";
    }
    
    //---------------------------------------------------------------------------------------------------------Function Block to animate shutdown Slider back to 0
    function animateSlider(startValue, endValue) {
        var delta = startValue - endValue;
        var step = 1;
        var interval = setInterval(function() {
            if (startValue > endValue) {
                startValue -= step;
                document.getElementById("turnOffSwitch").value = startValue;
            } else {
                clearInterval(interval);
            }
        }, 3);
    }
      
    function resetSliderValue() {
        var currentValue = parseInt(document.getElementById("turnOffSwitch").value);
        if (currentValue >= 100) {
            logConsole("try: shutdown");
            sendData("statusTurnOff", {"level": true});
            document.getElementById("turnOffSwitch").classList.add('turnOffSwitch2');
            exit();
        } else {
            document.getElementById("turnOffSwitch").classList.add('turnOffSlider');
            document.getElementById("turnOffSwitch").classList.remove('turnOffSwitch2');
        }
        animateSlider(currentValue, 0);
    }
      
    document.getElementById("turnOffSwitch").addEventListener('touchend', function() {
        resetSliderValue();
        });
    document.getElementById("turnOffSwitch").addEventListener('mouseup', function(){
        resetSliderValue();
    });
    
    
    //---------------------------------------------------------------------------------------------------------Function to start LightControl Panel
    function lightControlFunction() {
        hideStartButton();
        document.getElementById('ambientLight_ControlPanel').style.display="block";
    }
    var colorArray = [0,0,0,0];
    
    function getColor() {
        var color = document.getElementById("color-picker-input").value;
        var selectedImages = document.querySelectorAll(".toggleContainer input[type='checkbox']:checked + img");
        selectedImages.forEach(function(image) {
            var imageId = image.alt.split(" ")[1];
            var index = parseInt(imageId) - 1;
            colorArray[index] = color;
        });
    
        document.querySelectorAll(".toggleContainer input[type='checkbox']:not(:checked) + img").forEach(function(image) {
            var imageId = image.alt.split(" ")[1];
            var index = parseInt(imageId) - 1;
            if (!colorArray[index]) {
                colorArray[index] = "000000";
            }
        });
        logConsole("set ambient Light:");
        logConsole(colorArray);
        sendData("ambientLight", {"level": colorArray});
    }
    
    
    //---------------------------------------------------------------------------------------------------------Function to start SoundControl Panel
    function soundControlFunction() {
        hideStartButton();
        document.getElementById('soundControl_Panel').style.display="block";
    
        var tipContainer = document.getElementById('tip-container');
        tipContainer.style.display = "block";
    
        setTimeout(function() {
            tipContainer.style.display = "none";
        }, 5000);
        logConsole("open SoundControl");
        
    }
    
    
    //---------------------------------------------------------------------------------------------------------Function to start obd Panel 
    var liveInterval;
    function obdFunction(){
        hideStartButton();
        showOBDData=true;
        fetchDataAndDisplay();
        
        document.getElementById('obd_Panel').style.display="block";
        document.getElementById('additiveComponents').style.display="block";
        document.getElementById('obdInfo').style.display="block";
        document.getElementById('obdVisualisation').style.display="none";
        document.getElementById('obdErrorPage').style.display="none";
    
        startLiveIndicator();
    }
    //---------------------------------------------------------------------------------------------------------Function Block to blink live data image
    var isLive = true;
    function startLiveIndicator(){
        liveInterval = setInterval(liveIndicator, 750);
    }
    function liveIndicator(){
        var img = document.getElementById("live");
        img.src = isLive ? 'static/live_.png' : 'static/live.png';
        isLive = !isLive;
    }
    function stopliveIndicator(){
        clearInterval(liveInterval);
    }
    
    
    //---------------------------------------------------------------------------------------------------------Function Block to update obd Data
    
    function setRpm(value){
        document.getElementById("rpm").innerText=value+" U/min";
        var foreground = document.getElementById('rpmLevel');
        var height = 100 - (value / 7000) * 100;
        foreground.style.height = `${height}%`;
    }
    
    function setSpeed(value){
        document.getElementById("speed").innerText=value+" km/h";
        var rotationDegree = (value / 200) * (93.2 - (-93)) + (-93);
        document.getElementById('zeiger').style.transform = 'rotate(' + rotationDegree + 'deg)';
    }
    
    function setCoolAnt(value){
        document.getElementById("coolant_temp").innerText = value + " °C";
        const liquid = document.getElementById('liquid');
        const temp   = document.getElementById('digitalTemp');
        temp.textContent=value+'°C';
        const minHeight = 11;
        const maxHeight = 78;
        const heightRange = maxHeight - minHeight;
        const height = (heightRange * value) / 130 + minHeight;
        liquid.style.height = height + '%';
        if(value>96){
            liquid.style.backgroundColor="#b92d2d";
        }
        else if(value>85){
            liquid.style.backgroundColor="#356752";
        }
        else{
            liquid.style.backgroundColor="#353567";
        }
    }
    
    function setEngineLoad(value){
        document.getElementById("engine_load").innerText=value+" %";
    }
    
    function setMaf(value){
        document.getElementById("maf").innerText=value+" g/s";
    }
    
    function setRuntime(value){
        document.getElementById("runtime").innerText=value+" Min";
    }
    
    function setError(value){
        if(value === "error" || !Array.isArray(value)){
            return;
        }
        var dtc=document.getElementById('dtc');
        const errorBody = document.getElementById('errorBody');
    
        value.forEach(code => {
        const existingRow = Array.from(errorBody.children).find(row => row.textContent.trim() === code);
    
        if (!existingRow) {
            const newRow = document.createElement('tr');
            const newCell = document.createElement('td');
            newCell.textContent = code;
            dtc.textContent+=code+" ";
            newRow.appendChild(newCell);
            errorBody.appendChild(newRow);
        }
        });
    }
    
    function setStatus(value){
        document.getElementById("fuel_status").innerText=value;
    }
    
    function setLoadAbs(value){
        document.getElementById("load_abs").innerText=value+" %";
    }
    
    function setFuelPressure(value){
        document.getElementById("fuel_pressure").innerText=value+" kPa";
    }
    
    function setFuelRate(value){
        document.getElementById("fuel_rate").innerText=value+" l/h";
    }
    
    function setVin(value){
        document.getElementById("vin").innerText=value;
    }
    
    function setInformation(value){
        document.getElementById("current_data").innerText=value;
    }
    
    function setVoltage(value){
        var voltageValue = document.getElementById('battery_voltage');
        var barU12 = document.getElementById('voltageU12');
        var barG12 = document.getElementById('voltageG12');
    
        if(value > 12){
            barU12.style.width = "0.5%";
            var widthPercentage = (value - 12) * 15;
            barG12.style.width = widthPercentage + "%";
        } else if(value < 12){
            barG12.style.width = "0.5%";
            var widthPercentage = (value - 12) * -15;
            barU12.style.width = widthPercentage + "%";
        } else {
            barU12.style.width = "0.5%";
            barG12.style.width = "0.5%";
        }
        voltageValue.innerText=value+"V";
        voltage.innerText=value+"V";
    }
    
    
    //---------------------------------------------------------------------------------------------------------Function Block to switch between the obd sites
    function obd_2Page(){
        document.getElementById('obdInfo').style.display="none";
        document.getElementById('obdVisualisation').style.display="block";
    }
    
    
    function obd_3Page(){
        document.getElementById('obdVisualisation').style.display="none";
        document.getElementById('obdErrorPage').style.display="block";
    }
    
    
    function obd_1Page(){
        document.getElementById('obdErrorPage').style.display="none";
        document.getElementById('obdInfo').style.display="block";
    }
    
    //---------------------------------------------------------------------------------------------------------Function to go on settings Page
    function settingsFunction(){
        hideStartButton();
        document.getElementById("console").scrollTop = document.getElementById("console").scrollHeight;
        document.getElementById("settings").style.display="block";
    }


    //---------------------------------------------------------------------------------------------------------Function to go on maps Page
    function cardFunction() {
    checkInternetConnection()
        .then(connected => {
            if (connected) {
                logConsole("start navigation");
                sendData("startMaps", {"level": true});
            } else {
                showInternetError();
            }
        })
        .catch(error => {
            showInternetError();
        });
}

    
    
    //---------------------------------------------------------------------------------------------------------check whitch Buttons are pressed to for Color Change
    var button1Clicked = false;
    var button2Clicked = false;
    var button3Clicked = false;
    var button4Clicked = false;

    function toggleShadow(buttonId) {
        var checkbox = document.getElementById(buttonId);
        var img = checkbox.nextElementSibling.querySelector('img');
    
        switch (buttonId) {
            case 'colorBtn1':
                button1Clicked = !button1Clicked;
                break;
            case 'colorBtn2':
                button2Clicked = !button2Clicked;
                break;
            case 'colorBtn3':
                button3Clicked = !button3Clicked;
                break;
            case 'colorBtn4':
                button4Clicked = !button4Clicked;
                break;
            default:
                break;
        }

        if (checkbox.checked) {
            img.style.opacity = 1;
            img.style.boxShadow = '9px 9px 17px -1px white';
        } else {
            img.style.opacity = '';
            img.style.boxShadow = '';
        }
    }

    //---------------------------------------------------------------------------------------------------------Function to change specific colors for profile 2 
    function setColor() {
        var selectedColor = document.getElementById("colorSettings").value;
        var change=false;
        if(button1Clicked){
            document.documentElement.style.setProperty("--bar_2", selectedColor);
            change=true;
        }
        if(button2Clicked){
            document.documentElement.style.setProperty("--sidePanel_2", selectedColor);
            change=true;
        }
        if(button3Clicked){
            document.documentElement.style.setProperty("--buttonContainerColor_2", selectedColor);
            change=true;
        }
        if(button4Clicked){
            document.documentElement.style.setProperty("--volumeSliderBox_2", selectedColor);
            change=true;
        }
        if(change){
            logConsole("change color for profile 2");
        }
    }





    //---------------------------------------------------------------------------------------------------------Function to get obd Data from python script
    function fetchDataAndDisplay() {
        fetch('/get_obd_data', {
            method: 'GET'
        })
        .then(response => response.json())
        .then(data => {
            console.log("Empfangene OBD-Daten:", data);
            setRpm(data.rpm);
            setSpeed(data.speed);
            setCoolAnt(data.coolant_temp);
            setEngineLoad(data.engine_load);
            setMaf(data.maf);
            setRuntime(data.runtime);
            setError(data.dtc);
            setStatus(data.fuel_status);
            setLoadAbs(data.load_abs);
            setFuelPressure(data.fuel_pressure);
            setFuelRate(data.fuel_rate);
            setVin(data.vin);
            setInformation(data.current_data);
            setVoltage(data.battery_voltage);
        })
        .catch(error => console.error('Error fetching OBD data:', error));
        if(showOBDData){
            setTimeout(fetchDataAndDisplay, 500);
        }
    }
    window.onload = fetchDataAndDisplay;
    
    
    //---------------------------------------------------------------------------------------------------------Function to send Data to python Script
    function sendData(action, data) {
        logConsole("send:\n"+action + ", " + data+"\n------------------------");
        const formData = new FormData();
        formData.append('action', action);
        formData.append('data', JSON.stringify(data));
    
        fetch('/', {
            method: 'POST',
            body: formData
        });
    }
    
    
//---------------------------------------------------------------------------------------------------------Function to check if pi is connected
function checkInternetConnection() {
    return new Promise((resolve, reject) => {
        fetch('https://jsonplaceholder.typicode.com/posts/1', { method: 'HEAD' })
            .then(response => {
                if (response.ok) {
                    console.log('Verbunden mit dem Internet.');
                    resolve(true);
                } else {
                    console.log('Keine Internetverbindung.');
                    resolve(false);
                }
            })
            .catch(() => {
                console.log('Fehler beim Prüfen der Internetverbindung.');
                resolve(false);
            });
    });
}

function showInternetError(){
    document.getElementById('offlineMessage').style.display="block";
    setTimeout(hideWifiError, 2500);
}
    
function hideWifiError(){
    document.getElementById('offlineMessage').style.display="none";
}



    
    </script>
    
</html>
